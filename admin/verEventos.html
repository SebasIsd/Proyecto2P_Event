<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Eventos</title>
  <link rel="stylesheet" href="../styles/css/style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap"
    rel="stylesheet"
  />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    crossorigin="anonymous"
  />

  <style>
    /* Contenedor principal centrado con flexbox */
    .contenedor-eventos {
      display: flex;
      flex-wrap: wrap;
      justify-content: center; /* CENTRAR horizontalmente */
      gap: 15px;
      padding: 20px;
      background: #f9f9f9;
      min-height: 300px; /* opcional para que no se vea vacío */
    }

    /* Eventos card */
    .evento-card {
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 10px;
      padding: 20px;
      max-width: 400px;
      width: 100%;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      /* Ya no inline-block ni vertical-align, flexbox maneja */
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    /* Título del evento: más grande y negrita, sin color rojo, centrado */
    .evento-card h3 {
      font-weight: 700;
      font-size: 1.8rem;
      margin-bottom: 10px;
      color: inherit;
      text-align: center;
    }

    .evento-card p {
      margin: 5px 0;
      font-size: 18px;
    }

    .evento-card i {
      margin-right: 6px;
      color: #6c1313;
    }

    .botones {
      margin-top: 15px;
      display: flex;
      gap: 10px;
      justify-content: center; /* Centrar los botones */
    }

    /* Botones con contraste suave */
    .btn-editar,
    .btn-eliminar {
      padding: 8px 14px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      font-size: 13px;
      background-color: #94754d;
      color: white;
      transition: background-color 0.3s;
      min-width: 90px;
    }

    .btn-editar:hover,
    .btn-eliminar:hover {
      background-color: #a75151;
    }
    .filtro-inscripciones {
    margin: 20px auto;
    max-width: 400px;
    display: flex;
    justify-content: center;
}

.filtro-inscripciones input[type="text"] {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid #6c1313;
    border-radius: 10px;
    font-size: 16px;
    outline: none;
    transition: all 0.3s ease;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}

.filtro-inscripciones input[type="text"]::placeholder {
    color: #999;
}

.filtro-inscripciones input[type="text"]:focus {
    border-color: #6c1313;
    box-shadow: 0 0 8px rgba(0, 123, 255, 0.4);
}

  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="logo">
        <h1>Eventos <span>disponibles</span></h1>
      </div>
      <nav>
        <ul>
          <li>
            <a href="../admin/admin.html"
              ><i class="fas fa-home"></i> Inicio</a
            >
          </li>
          <li>
            <a href="../admin/indexEvento.html" class="active"
              ><i class="fas fa-calendar-alt"></i>Crear Eventos</a
            >
          </li>
        </ul>
      </nav>
    </div>
  </header>
<div class="filtro-inscripciones">
          <input type="text" id="filtroNombre" placeholder="Filtrar por nombre..." onkeyup="filtrarInscripciones()">
      </div>
  <div class="contenedor-eventos" id="contenedor-eventos"></div>

  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h3><i class="fas fa-info-circle"></i> Sobre el Sistema</h3>
          <p>Sistema de gestión de inscripciones para eventos y cursos académicos.</p>
        </div>
        <div class="footer-section">
          <h3><i class="fas fa-envelope"></i> Contacto</h3>
          <p><i class="fas fa-map-marker-alt"></i> Av. Principal 123, Ciudad</p>
          <p><i class="fas fa-envelope"></i> contacto@institucion.edu</p>
          <p><i class="fas fa-phone"></i> +123 456 7890</p>
        </div>
        <div class="footer-section">
          <h3><i class="fas fa-link"></i> Enlaces Rápidos</h3>
          <ul>
            <li><a href="#"><i class="fas fa-chevron-right"></i> Inicio</a></li>
            <li><a href="#"><i class="fas fa-chevron-right"></i> Eventos</a></li>
            <li><a href="#"><i class="fas fa-chevron-right"></i> Políticas</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2023 Sistema de Inscripciones. Todos los derechos reservados.</p>
      </div>
    </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const contenedor = document.getElementById('contenedor-eventos');

      fetch('../admin/obtenerEventos.php')
        .then(response => {
          if (!response.ok) throw new Error('Error en la respuesta del servidor');
          return response.json();
        })
        .then(data => {
          contenedor.innerHTML = '';

          if (data.error) {
            contenedor.innerHTML = `<p style="color:red;">${data.error}</p>`;
            return;
          }

          if (!Array.isArray(data) || data.length === 0) {
            contenedor.innerHTML = '<p>No hay eventos disponibles.</p>';
            return;
          }

          data.forEach(evento => {
            const card = document.createElement('div');
            card.classList.add('evento-card');

            card.innerHTML = `
              <h3>${evento.tit_eve_cur}</h3>
              <p>${evento.des_eve_cur}</p>
              <p><i class="fas fa-calendar-day"></i> Inicia el ${evento.fec_ini_eve_cur} y finaliza el ${evento.fec_fin_eve_cur}</p>
              <p><i class="fas fa-tag"></i>  ${evento.tip_eve ?? 'N/A'}</p>
              <p><i class="fas fa-chalkboard"></i>  ${evento.mod_eve_cur} - $${evento.cos_eve_cur}</p>
              <p><i class="fas fa-graduation-cap"></i>  ${evento.car_eve_cur ?? 'N/A'}</p>
              <div class="botones">
                <button class="btn-editar" onclick="editarEvento(${evento.id_eve_cur})"><i class="fas fa-edit"></i> Editar</button>
                <button class="btn-eliminar" onclick="eliminarEvento(${evento.id_eve_cur})"><i class="fas fa-trash"></i> Eliminar</button>
              </div>
            `;

            contenedor.appendChild(card);
          });
        })
        .catch(err => {
          console.error('Error al obtener eventos:', err);
          contenedor.innerHTML = '<p style="color:red;">Error al cargar eventos.</p>';
        });
    });

    function eliminarEvento(id) {
      if (confirm('¿Estás seguro de que deseas eliminar este evento?')) {
        fetch(`../admin/eliminarEvento.php?id=${id}`, { method: 'GET' })
          .then(res => res.json())
          .then(data => {
            alert(data.mensaje);
            location.reload();
          })
          .catch(err => {
            console.error('Error eliminando evento:', err);
            alert('Error eliminando el evento');
          });
      }
    }

    function editarEvento(id) {
      window.location.href = `../admin/editarEvento.html?id=${id}`;
    }

   function filtrarInscripciones() {
  const input = document.getElementById('filtroNombre');
  const filtro = input.value.toUpperCase();
  const tarjetas = document.querySelectorAll('.evento-card');

  tarjetas.forEach(card => {
    const titulo = card.querySelector('h3').textContent.toUpperCase();
    card.style.display = titulo.includes(filtro) ? '' : 'none';
  });
}

  </script>
</body>
</html>
