<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Administrar Usuarios</title>
  <link rel="stylesheet" href="../styles/css/style.css"/>
  <link rel="stylesheet" href="../styles/css/estiloAdminusuario.css"/>
  
   <link rel="stylesheet" href="../styles/css/pagoestilo.css">
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"/>
<style>

  #userData {
  display: none !important;
}
.resaltado {
  background-color: #ffeaa7 !important;
  font-weight: bold;
  transition: background 0.3s ease;
}

  :root {
    --primary: #6c1313;
    --primary-hover: #8B0000;
    --gray: #f4f4f4;
    --white: #ffffff;
    --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    --radius: 12px;
    --font: 'Montserrat', sans-serif;
  }

  body {
    font-family: var(--font);
    background-color: var(--gray);
    margin: 0;
    color: #1e1e1e;
  }

  main.container {
    max-width: 1100px;
    margin: 40px auto;
    padding: 0 20px;
  }

  h2 {
    text-align: center;
    color: var(--primary);
    margin-bottom: 30px;
  }

  .btn-toggle {
    background-color: var(--primary);
    color: var(--white);
    border: none;
    padding: 12px 18px;
    border-radius: var(--radius);
    margin-right: 10px;
    margin-bottom: 15px;
    cursor: pointer;
    font-weight: 600;
    transition: background 0.3s ease;
    box-shadow: var(--shadow);
  }

  .btn-toggle:hover {
    background-color: var(--primary-hover);
  }

  .form-container {
    background: var(--white);
    padding: 25px;
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    max-width: 600px;
    margin: 0 auto 30px;
    display: none;
  }

  .form-container h3 {
    color: var(--primary);
    text-align: center;
    margin-bottom: 20px;
  }

  form input,
  form select {
    width: 100%;
    padding: 12px;
    margin-bottom: 16px;
    border: 1px solid #ccc;
    border-radius: var(--radius);
    background: var(--white);
    font-size: 14px;
    transition: 0.3s ease;
  }

  form input:focus,
  form select:focus {
    border-color: var(--primary);
    outline: none;
    box-shadow: 0 0 0 2px rgba(108, 19, 19, 0.1);
  }

  form button {
    background-color: var(--primary);
    color: var(--white);
    padding: 12px;
    width: 100%;
    border: none;
    border-radius: var(--radius);
    font-weight: bold;
    cursor: pointer;
    transition: background 0.3s ease;
  }

  form button:hover {
    background-color: var(--primary-hover);
  }

  .search-box {
    max-width: 600px;
    margin: 30px auto;
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    justify-content: center;
  }

  .search-box input {
    flex: 1;
    padding: 12px;
    border: 1px solid #ccc;
    border-radius: var(--radius);
  }

  .search-box button {
    padding: 12px 18px;
    background-color: var(--primary);
    color: #fff;
    border: none;
    border-radius: var(--radius);
    cursor: pointer;
  }

  #userData {
    background: var(--white);
    padding: 25px;
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    max-width: 600px;
    margin: 30px auto;
  }

  #userData label {
    font-weight: 600;
    color: var(--primary);
    margin-top: 10px;
    display: block;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 30px;
    background: var(--white);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    overflow: hidden;
  }

  table th {
    background-color: var(--primary);
    color: var(--white);
    padding: 14px;
    text-align: left;
  }

  table td {
    padding: 14px;
    border-bottom: 1px solid #eee;
  }

  table tr:hover {
    background-color: #f9f9f9;
  }

  @media (max-width: 768px) {
    .btn-toggle {
      width: 100%;
    }

    .search-box {
      flex-direction: column;
    }

    .search-box input,
    .search-box button {
      width: 100%;
    }
  }
</style>



  
</head>
<body>

<header>
  <div class="container">
    <div class="logo"><h1>Gestion de Usuarios</h1></div>
    <nav>
      <ul>
        <li><a href="../admin/admin.html" class="active"><i class="fas fa-home"></i> Inicio</a></li>
        <li><a href="perfil.php"><i class="fas fa-user-circle"></i> Perfil</a></li>
        <li><a href="../index.html"><i class="fas fa-sign-out-alt"></i> Cerrar sesión</a></li>
      </ul>
    </nav>
  </div>
</header>

<main class="container">
  
    <button class="btn-toggle" onclick="toggleForm('formAgregar')"><i class="fas fa-user-plus"></i> Añadir Usuario</button>
    <button class="btn-toggle" onclick="toggleForm('modificar')"><i class="fas fa-user-plus"></i> Modificar Usuario</button>
    <button class="btn-toggle" onclick="toggleForm('formEliminar')"><i class="fas fa-user-times"></i> Eliminar Usuario</button>
<div style="height: 25px;"></div>
    <div class="form-container" id="formAgregar" style="display: none;  max-width: 350px; margin: auto;">
     

      <h3 style="color: white;">Agregar Usuario</h3>
      <form id="formAgregarUsuario"  >
        <input type="text" name="cedula" placeholder="Cédula" required style="width: 100%;"><br>
        <div style="display: flex; gap: 5px;">
        <input type="text" name="nom_pri_usu" placeholder="Primer Nombre" required  style="width: 100%;"><br>
        <input type="text" name="nom_seg_usu" placeholder="Segundo Nombre" style="width: 100%;"><br>
        </div>
         <div style="display: flex; gap: 5px;">
        <input type="text" name="ape_pri_usu" placeholder="Apellido Paterno" required style="width: 100%;"><br>
        <input type="text" name="ape_seg_usu" placeholder="Apellido Materno" style="width: 100%;"><br>
        </div>
        <input type="email" name="correo" placeholder="Correo" required><br>
        <input type="password" name="password" placeholder="Contraseña" required><br>
        <input type="text" name="telefono" placeholder="Teléfono"><br>
        <input type="text" name="direccion" placeholder="Dirección"><br>
        <input type="date" name="fec_nac_usu" required><br>
        <select name="id_rol_usu" required>
          <option value="" disabled selected>Seleccione Cargo</option>
          <option value="1">Administrador</option>
          <option value="2">Usuario</option>
          <option value="3">Invitado</option>
        </select><br>
        <input type="text" name="carrera" placeholder="Carrera"><br>
        <button type="submit">Agregar Usuario</button>
      </form>
    </div>
    <div id="modificar" class="search-box" >
     
    <input type="text" id="ced_usu" placeholder="Ingrese la cédula" maxlength="20"/>
    <button id="buscarBtn"><i class="fas fa-search"></i> Buscar</button>
    <span id="loading" class="loading">Buscando...</span>
    <span id="errorMsg" class="error"></span>
  </div>
  <div id="userData" style="display: none;">
    <h3>Datos del Usuario</h3>
    <form id="formUsuario"   style="max-width: 300px; margin: auto; padding-top: 5px; padding-bottom: 5px;">
      <input type="hidden" id="ced_usu_hidden" name="ced_usu"/>
      <label style="color: white;" for="ape_pri_usu">Nombres:</label>
       <div style="display: flex; gap: 2px;">
      <input type="text" id="nom_pri_usu" name="nom_pri_usu" disabled required><br>
      <input type="text" id="nom_seg_usu" name="nom_seg_usu" disabled><br>
        </div>
        <label style="color: white;" for="ape_pri_usu">Apellidos:</label>
         <div style="display: flex; gap: 2px;">  
      <input type="text" id="ape_pri_usu" name="ape_pri_usu" disabled required><br>
      <input type="text" id="ape_seg_usu" name="ape_seg_usu" disabled><br>
      </div>
      <label style="color: white;"  for="cor_usu">Correo:</label>
      <input type="email" id="cor_usu" name="cor_usu" disabled required><br>
      <label style="color: white;"  for="pas_usu">Contraseña:</label>
      <input type="password" id="pas_usu" name="pas_usu" disabled required><br>
      <label style="color: white;" for="tel_usu">Teléfono:</label>
      <input type="text" id="tel_usu" name="tel_usu" disabled><br>
      <label style="color: white;" for="dir_usu">Dirección:</label>
      <input  type="text" id="dir_usu" name="dir_usu" disabled><br>
      <label style="color: white;" for="fec_nac_usu">Fecha de Nacimiento:</label>
      <input type="date" id="fec_nac_usu" name="fec_nac_usu" disabled><br>

      <button type="button" id="btnEditar" onclick="habilitarEdicion()">Editar</button>
      <button type="button" id="btnGuardar" onclick="actualizarUsuario()" style="display:none;">Guardar</button>
      <span id="loading" style="display:none;">Guardando...</span>
    </form>
    <p id="error" class="error"></p>
  </div>

    <div class="form-container" id="formEliminar" style="display: none;">
      <h3 style="color: white;">Eliminar Usuario</h3>
      <form id="formEliminarUsuario">
        <input type="text" name="cedula" placeholder="Cédula" required><br>
        <button type="submit">Eliminar Usuario</button>
      </form>
    </div>
  <!-- Botones de gestión -->
  <aside style="margin-top: 40px;">
    <!-- Listado -->
    <section>
      <h3>Listado de Usuarios</h3>
      <div style="overflow-x:auto;">
        <table border="1" style="width:100%;" id="tablaUsuarios">
          <thead>
            <tr>
              <th>Cédula</th>
              <th>Nombres</th>
              <th>Apellidos</th>
              <th>Correo</th>
              <th>Teléfono</th>
              <th>Carrera</th>
              <th>Cargo</th>
            </tr>
          </thead>
          <tbody id="cuerpoTablaUsuarios"></tbody>
        </table>
      </div>
    </section>

    <!-- Botones para mostrar/ocultar formularios -->
    


  </aside>
</main>
<div style="height: 100px;"></div>
<footer>
  <div class="container">
    <div class="footer-content">
      <div class="footer-section">
        <h3><i class="fas fa-info-circle"></i> Sobre el Sistema</h3>
        <p>Sistema de gestión de inscripciones para eventos y cursos académicos de la institución.</p>
        <div class="social-icons">
          <a href="#"><i class="fab fa-facebook"></i></a>
          <a href="#"><i class="fab fa-twitter"></i></a>
          <a href="#"><i class="fab fa-instagram"></i></a>
          <a href="#"><i class="fab fa-linkedin"></i></a>
        </div>
      </div>
      <div class="footer-section">
        <h3><i class="fas fa-envelope"></i> Contacto</h3>
        <p><i class="fas fa-envelope"></i> contacto@institucion.edu</p>
        <p><i class="fas fa-phone"></i> +123 456 7890</p>
        <p><i class="fas fa-map-marker-alt"></i> Dirección: Av. Principal 123, Ciudad</p>
      </div>
      <div class="footer-section">
        <h3><i class="fas fa-link"></i> Enlaces Rápidos</h3>
        <ul>
          <li><a href="#"><i class="fas fa-home"></i> Inicio</a></li>
          <li><a href="#eventos"><i class="fas fa-calendar-alt"></i> Eventos</a></li>
          <li><a href="#"><i class="fas fa-question-circle"></i> Preguntas Frecuentes</a></li>
          <li><a href="#"><i class="fas fa-file-alt"></i> Políticas de Privacidad</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2023 Sistema de Inscripciones. Todos los derechos reservados.</p>
    </div>
  </div>
</footer>

<!-- Scripts -->
<script src="../styles/buscarusuario.js"></script>
<script src="../styles/usuarios_adimn.js"></script>
<script>
  function toggleForm(id) {
    const form = document.getElementById(id);
    form.style.display = (form.style.display === 'none' || form.style.display === '') ? 'block' : 'none';
  }
</script>
<script>
  function toggleForm(formId) {
    const formularios = ['formAgregar', 'modificar', 'formEliminar'];

    formularios.forEach(id => {
      const form = document.getElementById(id);
      if (form) {
        form.style.display = (id === formId) ? 'block' : 'none';
      }
    });
  }
</script>

<script>
  document.getElementById('buscarBtn').addEventListener('click', function () {
    const cedulaBuscada = document.getElementById('ced_usu').value.trim();
    const filas = document.querySelectorAll('#tablaUsuarios tbody tr');
    const errorMsg = document.getElementById('errorMsg');
    let encontrado = false;

    // Limpiar estados anteriores
    filas.forEach(fila => fila.classList.remove('resaltado'));

    filas.forEach(fila => {
      const cedulaTabla = fila.children[0].textContent.trim(); // Primera columna = cédula
      if (cedulaTabla === cedulaBuscada) {
        fila.classList.add('resaltado');
        encontrado = true;
        fila.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }
    });

    if (!encontrado) {
      errorMsg.textContent = 'Cédula no encontrada.';
    } else {
      errorMsg.textContent = '';
    }
  });
</script>


</body>
</html>
