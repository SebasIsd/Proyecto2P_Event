<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Administrar Usuarios</title>
  <link rel="stylesheet" href="../styles/css/estiloAdminusuario.css"/>
  <link rel="stylesheet" href="../styles/css/style.css"/>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"/>

  <style>
    .loading { display: none; color: #ff0000; font-weight: bold; }
    .error { color: #dc3545; }
    .form-container { display: none; margin-top: 15px; padding: 15px; border: 1px solid #ccc; background: #f9f9f9; }
    .btn-toggle { margin-top: 20px; cursor: pointer; background-color: #6c1313; color: #fff; border: none; padding: 10px; border-radius: 5px; }
    .btn-toggle:hover { background-color: #0056b3; }
    #modificar {
    display: none;
  }
  </style>
</head>
<body>

<header>
  <div class="container">
    <div class="logo"><h1>Utas</h1></div>
    <nav>
      <ul>
        <li><a href="../admin/admin.html" class="active"><i class="fas fa-home"></i> Inicio</a></li>
        <li><a href="#"><i class="fas fa-calendar-alt"></i> Eventos</a></li>
        <li><a href="/usuarios/inscripciones/inscripciones.html"><i class="fas fa-edit"></i> Inscripciones</a></li>
        <li><a href="#"><i class="fas fa-users"></i> Usuarios</a></li>
        <li><a href="/usuarios/SolicitudesCambios/solicitudCambios.html"><i class="fas fa-chart-bar"></i> Solicitudes de Cambios</a></li>
        <li><a href="perfil.php"><i class="fas fa-user-circle"></i> Perfil</a></li>
        <li><a href="../index.html"><i class="fas fa-sign-out-alt"></i> Cerrar sesión</a></li>
      </ul>
    </nav>
  </div>
</header>

<main class="container">
    <h2>Gestión de Usuarios</h2>
    <button class="btn-toggle" onclick="toggleForm('formAgregar')"><i class="fas fa-user-plus"></i> Añadir Usuario</button>
    <button class="btn-toggle" onclick="toggleForm('modificar')"><i class="fas fa-user-plus"></i> Modificar Usuario</button>
    <button class="btn-toggle" onclick="toggleForm('formEliminar')"><i class="fas fa-user-times"></i> Eliminar Usuario</button>

    <div class="form-container" id="formAgregar">
      <h3>Agregar Usuario</h3>
      <form id="formAgregarUsuario">
        <input type="text" name="cedula" placeholder="Cédula" required><br>
        <input type="text" name="nom_pri_usu" placeholder="Primer Nombre" required><br>
        <input type="text" name="nom_seg_usu" placeholder="Segundo Nombre"><br>
        <input type="text" name="ape_pri_usu" placeholder="Apellido Paterno" required><br>
        <input type="text" name="ape_seg_usu" placeholder="Apellido Materno"><br>
        <input type="email" name="correo" placeholder="Correo" required><br>
        <input type="password" name="password" placeholder="Contraseña" required><br>
        <input type="text" name="telefono" placeholder="Teléfono"><br>
        <input type="text" name="direccion" placeholder="Dirección"><br>
        <input type="date" name="fec_nac_usu" required><br>
        <select name="id_rol_usu" required>
          <option value="" disabled selected>Seleccione Cargo</option>
          <option value="1">Administrador</option>
          <option value="2">Usuario</option>
          <option value="3">Invitado</option>
        </select><br>
        <input type="text" name="carrera" placeholder="Carrera"><br>
        <button type="submit">Agregar Usuario</button>
      </form>
    </div>
    <div id="modificar" class="search-box">
     
    <input type="text" id="ced_usu" placeholder="Ingrese la cédula" maxlength="20"/>
    <button id="buscarBtn"><i class="fas fa-search"></i> Buscar</button>
    <span id="loading" class="loading">Buscando...</span>
    <span id="errorMsg" class="error"></span>
  </div>

  <div id="userData" style="display: none;">
    <h3>Datos del Usuario</h3>
    <form id="formUsuario">
      <input type="hidden" id="ced_usu_hidden" name="ced_usu"/>
      <label for="nom_pri_usu">Nombre:</label>
      <input type="text" id="nom_pri_usu" name="nom_pri_usu" disabled required><br>
      <label for="nom_seg_usu">Segundo Nombre:</label>
      <input type="text" id="nom_seg_usu" name="nom_seg_usu" disabled><br>
      <label for="ape_pri_usu">Apellido:</label>
      <input type="text" id="ape_pri_usu" name="ape_pri_usu" disabled required><br>
      <label for="ape_seg_usu">Segundo Apellido:</label>
      <input type="text" id="ape_seg_usu" name="ape_seg_usu" disabled><br>
      <label for="cor_usu">Correo:</label>
      <input type="email" id="cor_usu" name="cor_usu" disabled required><br>
      <label for="pas_usu">Contraseña:</label>
      <input type="password" id="pas_usu" name="pas_usu" disabled required><br>
      <label for="tel_usu">Teléfono:</label>
      <input type="text" id="tel_usu" name="tel_usu" disabled><br>
      <label for="dir_usu">Dirección:</label>
      <input type="text" id="dir_usu" name="dir_usu" disabled><br>
      <label for="fec_nac_usu">Fecha de Nacimiento:</label>
      <input type="date" id="fec_nac_usu" name="fec_nac_usu" disabled><br>

      <button type="button" id="btnEditar" onclick="habilitarEdicion()">Editar</button>
      <button type="button" id="btnGuardar" onclick="actualizarUsuario()" style="display:none;">Guardar</button>
      <span id="loading" style="display:none;">Guardando...</span>
    </form>
    <p id="error" class="error"></p>
  </div>

    <div class="form-container" id="formEliminar">
      <h3>Eliminar Usuario</h3>
      <form id="formEliminarUsuario">
        <input type="text" name="cedula" placeholder="Cédula" required><br>
        <button type="submit">Eliminar Usuario</button>
      </form>
    </div>


  

  <!-- Botones de gestión -->
  <aside style="margin-top: 40px;">
    

    <!-- Listado -->
    <section>
      <h3>Listado de Usuarios</h3>
      <div style="overflow-x:auto;">
        <table border="1" style="width:100%;" id="tablaUsuarios">
          <thead>
            <tr>
              <th>Cédula</th>
              <th>Nombres</th>
              <th>Apellidos</th>
              <th>Correo</th>
              <th>Teléfono</th>
              <th>Carrera</th>
              <th>Cargo</th>
            </tr>
          </thead>
          <tbody id="cuerpoTablaUsuarios"></tbody>
        </table>
      </div>
    </section>

    <!-- Botones para mostrar/ocultar formularios -->
    


  </aside>
</main>
<div style="height: 100px;"></div>
<footer>
  <div class="container">
    <div class="footer-content">
      <div class="footer-section">
        <h3><i class="fas fa-info-circle"></i> Sobre el Sistema</h3>
        <p>Sistema de gestión de inscripciones para eventos y cursos académicos de la institución.</p>
        <div class="social-icons">
          <a href="#"><i class="fab fa-facebook"></i></a>
          <a href="#"><i class="fab fa-twitter"></i></a>
          <a href="#"><i class="fab fa-instagram"></i></a>
          <a href="#"><i class="fab fa-linkedin"></i></a>
        </div>
      </div>
      <div class="footer-section">
        <h3><i class="fas fa-envelope"></i> Contacto</h3>
        <p><i class="fas fa-envelope"></i> contacto@institucion.edu</p>
        <p><i class="fas fa-phone"></i> +123 456 7890</p>
        <p><i class="fas fa-map-marker-alt"></i> Dirección: Av. Principal 123, Ciudad</p>
      </div>
      <div class="footer-section">
        <h3><i class="fas fa-link"></i> Enlaces Rápidos</h3>
        <ul>
          <li><a href="#"><i class="fas fa-home"></i> Inicio</a></li>
          <li><a href="#eventos"><i class="fas fa-calendar-alt"></i> Eventos</a></li>
          <li><a href="#"><i class="fas fa-question-circle"></i> Preguntas Frecuentes</a></li>
          <li><a href="#"><i class="fas fa-file-alt"></i> Políticas de Privacidad</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2023 Sistema de Inscripciones. Todos los derechos reservados.</p>
    </div>
  </div>
</footer>

<!-- Scripts -->
<script src="../styles/buscarusuario.js"></script>
<script src="../styles/usuarios_adimn.js"></script>
<script>
  function toggleForm(id) {
    const form = document.getElementById(id);
    form.style.display = (form.style.display === 'none' || form.style.display === '') ? 'block' : 'none';
  }
</script>

</body>
</html>
